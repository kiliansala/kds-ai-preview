# AI-Driven Workflow

This document describes the AI-driven workflow for KDS AI Preview development.

## Project Philosophy

**"Design System as Code, Generated by AI"**

The goal is to demonstrate that a complete Design System can be generated, maintained, and evolved by AI agents, from design extraction through to final implementation across multiple frameworks.

## Workflow Stages

### 1. Design Extraction (Figma -> Tokens)

**Tool**: Figma MCP Server
**Input**: Components in Figma (Untitled UI)
**Output**: Design Tokens (JSON/CSS)
**AI Agent**: Claude with Figma access via MCP

**Process**:
```
1. AI reads the component in Figma
2. AI identifies variants, states, properties
3. AI extracts colors, spacing, typography, etc.
4. AI generates structured tokens
5. AI creates CSS custom properties
```

**Example Generated Token**:
```json
{
  "button": {
    "primary": {
      "background": "#6366F1",
      "color": "#FFFFFF",
      "padding": "12px 24px",
      "borderRadius": "8px"
    }
  }
}
```

### 2. Component Generation (Tokens -> LIT)

**Tool**: Claude Code
**Input**: Design Tokens + Design specifications
**Output**: Web Component in LIT
**AI Agent**: Claude with LIT/Web Components expertise

**Process**:
```
1. AI analyzes the component tokens
2. AI determines required reactive properties
3. AI generates the LIT structure with decorators
4. AI implements styles with CSS + tokens
5. AI adds accessibility (ARIA, keyboard navigation)
6. AI generates TypeScript types
7. AI creates basic tests
```

**Component Features**:
- Encapsulated Shadow DOM
- Reactive properties with @property()
- Custom events
- Slots for content
- Token-based styles
- WCAG 2.1 AA accessibility

### 3. Wrapper Generation (LIT -> Frameworks)

**Tool**: Claude Code
**Input**: Web Component + Framework requirements
**Output**: Framework-specific wrappers
**AI Agent**: Claude with React/Angular/Blazor expertise

**React Wrapper**:
```typescript
// AI generates wrapper using @lit-labs/react
import { createComponent } from '@lit-labs/react';
import { KdsButton } from '@kds/web-components';

export const Button = createComponent({
  tagName: 'kds-button',
  elementClass: KdsButton,
  react: React,
});
```

**Angular Wrapper**:
```typescript
// AI generates directive with CUSTOM_ELEMENTS_SCHEMA
@Component({
  selector: 'kds-button',
  template: '<ng-content></ng-content>',
  schemas: [CUSTOM_ELEMENTS_SCHEMA]
})
export class KdsButtonComponent { }
```

### 4. Documentation Generation

**Tool**: Claude Code + Automatic wrappers
**Input**: Web Component source + JSDoc
**Output**: Interactive documentation
**AI Agent**: Claude documenting APIs

**Generates**:
- API Reference (props, events, slots)
- Usage examples per framework
- Storybook stories
- Accessibility guidelines
- Best practices

### 5. Testing Generation

**Tool**: Claude Code
**Input**: Component + Specifications
**Output**: Complete test suite
**AI Agent**: Claude with testing expertise

**Generated tests**:
- Unit tests (props, events, rendering)
- Visual regression tests
- Accessibility tests
- Integration tests with frameworks

## Advantages of the AI-First Approach

### Consistency
- AI applies the same patterns across all components
- Reduces human error
- Maintains code standards

### Speed
- Component generation in minutes, not days
- Fast iteration based on feedback
- Mass updates when designs change

### Automatic Documentation
- Documentation is generated from code
- Always up to date
- Includes working examples

### Accessibility by Default
- AI includes ARIA attributes automatically
- Standard keyboard navigation
- WCAG-compliant from the start

### Multi-Framework with No Extra Effort
- Wrappers are generated automatically
- Consistent behavior across frameworks
- Reduces maintenance effort

## Prompts and Templates

The project maintains a library of optimized prompts for:

1. **Token Extraction**
   - "Extract all design tokens from this Figma component..."

2. **Component Generation**
   - "Generate a LIT web component with these specifications..."

3. **Wrapper Generation**
   - "Create a React wrapper for this web component..."

4. **Documentation**
   - "Generate comprehensive documentation for..."

5. **Testing**
   - "Create a test suite that covers..."

## Limitations and Considerations

### Current
- Figma free version does not have variables
- Token extraction is manual/semi-automated
- Requires human validation of output

### Future Improvements
- Integration with Figma Variables (pro version)
- Automated CI/CD pipeline
- Automatic visual regression testing
- Automatic detection of Figma changes

## Success Metrics

To measure the success of the AI-first approach:

1. **Speed**: Time from design to production
2. **Consistency**: Adherence to patterns
3. **Coverage**: Tests, docs, accessibility
4. **Maintainability**: Ease of updates
5. **Adoption**: Usage by developers

## Next Steps

1. Implement Button extraction via MCP
2. Generate first web component entirely with AI
3. Create wrappers for all 3 frameworks
4. Validate quality and consistency
5. Iterate and refine prompts
6. Document learnings
7. Present to stakeholders

---

**This workflow evolves continuously based on project learnings.**
