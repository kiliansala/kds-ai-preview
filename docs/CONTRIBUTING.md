# Contributing to KDS AI Preview

This project is an internal Kapsch PoC. This document describes how to collaborate on development.

## AI-First Development

This project follows an **AI-First** approach, where most code is generated by Claude AI.

### Development Workflow

1. **Define Requirements**
   - Describe the needed component or feature
   - Provide design references (Figma)
   - Specify expected behaviors

2. **AI Generation**
   - Use Claude Code to generate the code
   - Iterate with prompts to refine
   - Validate output against specifications

3. **Human Review**
   - Verify generated code quality
   - Test functionality
   - Ensure accessibility
   - Validate performance

4. **Documentation**
   - Documentation is generated automatically
   - Add additional context if needed
   - Update examples

## Commit Structure

We follow Conventional Commits:

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**Types**:
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation only
- `style`: Formatting changes (no code impact)
- `refactor`: Refactoring (neither feat nor fix)
- `perf`: Performance improvements
- `test`: Adding or modifying tests
- `chore`: Maintenance tasks
- `ai`: Generation/regeneration via AI

**Scopes**:
- `tokens`: Design tokens
- `components`: Web components
- `react`: React wrapper
- `angular`: Angular wrapper
- `blazor`: Blazor wrapper
- `docs`: Documentation
- `build`: Build system

**Examples**:
```
ai(components): generate Button component via Claude
feat(tokens): add color tokens from Figma
docs(readme): update setup instructions
```

## Generating a New Component

The full 9-step workflow is documented in [docs/DEVELOPMENT.md](./DEVELOPMENT.md#workflow-new-component).

**Summary**:
1. **Figma Extraction** - Extract via Claude CLI + MCP (`get_design_context`)
2. **Design Contracts** - Create `.figma/{component}.figma-contract.{json,ts}`
3. **LIT Component** - Implement `packages/web-components/src/components/kds-{component}.ts`
4. **Contract Validation** - Create and run `scripts/validate-{component}-contract.ts`
5. **A11y Validation** - Create and run `scripts/validate-{component}-a11y.ts`
6. **Framework Wrappers** - React, Angular, Blazor
7. **Interactive Documentation** - Update `packages/web-components/index.html`
8. **Validate & Auto-fix Docs** - Run `validate:docs` → `fix:docs` → `validate:docs`
9. **Final Testing** - Contract + a11y + manual browser testing

## Code Standards

### Web Components (LIT)
- Use TypeScript strict mode
- Decorators for reactive properties
- Always use Shadow DOM
- CSS-in-JS with `css` tagged template
- Minimum WCAG 2.1 AA accessibility

### Naming Conventions
- Components: `kds-component-name`
- Props: camelCase
- Events: kebab-case (e.g.: `value-changed`)
- CSS custom properties: `--kds-component-property`

### Tokens
```css
/* Token structure */
--kds-color-primary-500
--kds-spacing-md
--kds-font-size-body
--kds-border-radius-lg
```

## Testing

Each component must include:

1. **Unit Tests**
   - Props rendering
   - Events dispatching
   - Slot content
   - Attribute changes

2. **Accessibility Tests**
   - ARIA attributes
   - Keyboard navigation
   - Screen reader support
   - Color contrast

3. **Visual Tests** (future)
   - Screenshot comparison
   - Responsive behavior

## PR Checklist

Before creating a PR, verify:

- [ ] AI-generated code reviewed
- [ ] No TypeScript errors
- [ ] Tests passing
- [ ] Accessibility validated
- [ ] Documentation updated
- [ ] Usage examples included
- [ ] Compatible with all 3 frameworks
- [ ] Successful build with no warnings

## Tools

- **Claude Code**: Code generation
- **Figma MCP**: Design extraction
- **Vite**: Build tool
- **TypeScript**: Type safety
- **Lit**: Web components
- **Workspaces**: Monorepo management

## Support

For questions or issues:
- **Technical Lead**: Kilian Sala (kilian.sala@kapsch.net)
- **Documentation**: See [docs/](../docs/)
- **Development Guide**: See [docs/DEVELOPMENT.md](./DEVELOPMENT.md)

---

**Remember**: This is a PoC to explore AI-driven development.
Experimenting, iterating, and documenting learnings is part of the process.
